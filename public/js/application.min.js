var getColorLuminance,makeActive,moveInlineStyle,updateClasses,updateStyle;$(document).ready(function(){var e,t;return e=new Behave({textarea:document.getElementById("css-editor"),replaceTab:!0,softTabs:!0,tabSize:2,autoOpen:!0,overwrite:!0,autoStrip:!0,autoIndent:!0}),$(".input-color").minicolors(),$(".css-includes").keyup(function(){return $(".el-active").attr("class","el el-box el-active").addClass($(this).val())}),$(".css-editor").keyup(function(){return $("#userstyle").empty(),$("#userstyle").append($(this).val())}),$(".elidstyle").keyup(function(){return updateStyle($(".el-active"))}),$(".helper-gradient").keyup(function(){var e,t,a;return a=$(".helper-colorhex").val(),t=getColorLuminance(a,-$(this).val()),console.log(t),e="background-image: -o-linear-gradient(-90deg, "+a+" 0%, "+t+" 100%);\nbackground-image: -moz-linear-gradient(-90deg, "+a+" 0%, "+t+" 100%);\nbackground-image: -ms-linear-gradient(-90deg, "+a+" 0%, "+t+" 100%);\nbackground-image: linear-gradient(-180deg, "+a+" 0%, "+t+" 100%);",$(".helper-gradient-code").html(e)}),$(".updatePageDim").click(function(){var e,t,a;return 0===$(".page").length?(t=$("<div class='page'></div>"),t.draggable({snap:!0}),t.resizable()):t=$(".page"),a=$(".pageWidth").val(),e=$(".pageHeight").val(),$(".workspace").css("background","#FFFFFF").css("width",a+"px").css("height",e+"px")}),t=0,$(".addBox").click(function(){var e;return e=$("<div class='el el-box' id='elid-"+t+"' data-elid='"+t+"'></div>"),e.addClass("defaultbox"),e.draggable({snap:!0,start:function(){return makeActive($(this)),updateClasses($(this))},stop:function(){return moveInlineStyle(e)}}),e.resizable({stop:function(){return moveInlineStyle(e)}}),makeActive(e),updateClasses(e),e.click(function(){return makeActive($(this)),updateClasses($(this))}),$(".workspace").append(e),t++})}),updateStyle=function(e){var t,a,l,s,n,i,r;return r=$(".set-size-w").val(),l=$(".set-size-h").val(),i=$(".set-pos-top").val(),s=$(".set-pos-left").val(),a=e.data("elid"),0===$("#style-"+a).length&&(n=$("<style id='style-"+a+"'></style>"),$("head").append(n)),t="#elid-"+a+" {width: "+r+";height: "+l+";top: "+i+";left: "+s+";}",$("#style-"+a).html(t)},moveInlineStyle=function(e){var t,a,l,s;return s=e.css("width"),t=e.css("height"),l=e.css("top"),a=e.css("left"),$(".set-size-w").val(s),$(".set-size-h").val(t),$(".set-pos-top").val(l),$(".set-pos-left").val(a),e.attr("style",""),updateStyle(e)},makeActive=function(e){return $(".el-active").removeClass("el-active"),e.addClass("el-active")},updateClasses=function(e){var t,a,l,s,n,i;for(a=e.attr("class").split(" "),l="",s=["el","el-box","el-active","defaultbox","ui-draggable","ui-draggable-dragging","ui-resizable"],n=0,i=a.length;i>n;n++)t=a[n],s.indexOf(t)<=-1&&(l=t+" ");return $(".css-includes").val(l)},getColorLuminance=function(e,t){var a,l,s;for(e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0,s="#",a=0,l=0;3>l;)a=parseInt(e.substr(2*l,2),16),a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16),s+=("00"+a).substr(a.length),l++;return s};